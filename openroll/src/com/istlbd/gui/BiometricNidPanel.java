/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.istlbd.gui;

import ImageProcessing.ImageAndFileProcessing;
import business.bean.PersonManagerBean;
import business.bean.Utils;
import business.entity.BioBiometric;
import business.entity.BioPerson;
import business.entity.Item;
import com.face.faisal.ICAOFaceInternalFrame;
import com.face.faisal.SignatureCaptureForm;
import com.faisal.iris.IrisUtils;
import client.bean.ApplicationData;
//import com.perp.Lookup.ComboItem;
import com.istlbd.utils.Defs;
import database.bean.AddressEntityManagerBean;
import database.bean.BioAttachmentEntityManagerBean;
import database.bean.DistrictJpaController;
import database.entity.Area;
import database.entity.BioAttachment;
import database.entity.City;
import database.entity.District;
import database.entity.Division;
import database.entity.Eunion;
import database.entity.Postoffice;
import database.entity.Upozila;
import database.entity.Village;
import database.entity.VoterArea;
import static com.istlbd.gui.ContainerJFrame.imagePanel1;
import com.istlbd.interfaces.IEnrollment;
import com.istlbd.processing.Enrollment;
import com.istlbd.utils.Lookup;
import static com.istlbd.utils.Lookup.RMO_LIST;
import java.awt.CardLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.GraphicsEnvironment;
import java.awt.event.ItemEvent;
import java.awt.image.BufferedImage;
import java.awt.image.WritableRaster;
import java.io.File;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.swing.ImageIcon;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import org.jdesktop.xswingx.PromptSupport;
import org.jnbis.Bitmap;
import org.jnbis.WsqDecoder;
import ws.response.AddBioPersonResponse;
import ws.response.GetPersonSummaryResponse;

/**
 *
 * @author Maverick
 */
public class BiometricNidPanel extends javax.swing.JPanel implements IEnrollment {

    private static byte[] smart_card_photo = null;
    public static ApplicationData applicationData = null;
//    private ArrayList<String> errorFields = null;
    private HashMap<String, Boolean> errorFieldsMap = null;
    private Color errorFieldBorderColor = new Color(255, 0, 0);
    private Color defaultFieldBorderColor = new Color(153, 153, 153);
    private String setted_present_district="";
    private String DIVISION_VALUE="";
    private String setted_present_upozila="";
    private String setted_present_postoffice="";
    private String DISTRICT_VALUE="";
    private String setted_present_city="";
    private String setted_present_eunion="";
    private String setted_present_mouza="";
    private String setted_present_village="";
    private String setted_permanent_district="";
    private String setted_permanent_upozila="";
    private String setted_permanent_postoffice="";
    private String setted_permanent_city="";
    private String setted_permanent_eunion="";
    private String setted_permanent_mouza="";
    private String setted_permanent_village="";
    
    private String dob = "";
    private String nid = "";

    public static byte[] getSmart_card_photo() {
        return smart_card_photo;
    }

    public static void setSmart_card_photo(byte[] smart_card_photo) {
        BiometricNidPanel.smart_card_photo = smart_card_photo;
    }
    private static Font banglaFont = null;
    private String setted_present_rmo;
    private String setted_permanent_rmo;
    private String setted_voter_area;

    /**
     * Creates new form ApplicationPanel
     */
    public BiometricNidPanel() {
        initComponents();
        setPlaceHolder();
        hiddenObjects();
    }
    
    public void hiddenObjects(){
        separator_docs.setVisible(false);
        chk_fp_not_ten_fingers.setVisible(false);
        lbl_documents_header.setVisible(false);
        inp_remark_fp.setVisible(false);
        chk_sd_other.setVisible(false);
        chk_sd_citizenship.setVisible(false);
        chk_sd_marriage.setVisible(false);
        chk_sd_transfer.setVisible(false);
        chk_sd_utility.setVisible(false);
        btn_attachment.setVisible(false);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        genderButtonGroup = new javax.swing.ButtonGroup();
        content_panel = new javax.swing.JPanel();
        lbl_biometric_header = new javax.swing.JLabel();
        inp_remark_fp = new javax.swing.JTextField();
        chk_sd_other = new javax.swing.JCheckBox();
        separator_bio_horizontal = new javax.swing.JSeparator();
        lbl_fp_lp = new javax.swing.JLabel();
        lbl_fp_lr = new javax.swing.JLabel();
        lbl_fp_lm = new javax.swing.JLabel();
        lbl_fp_li = new javax.swing.JLabel();
        lbl_fp_lt = new javax.swing.JLabel();
        lbl_fp_rp = new javax.swing.JLabel();
        lbl_fp_rr = new javax.swing.JLabel();
        lbl_fp_rm = new javax.swing.JLabel();
        lbl_fp_ri = new javax.swing.JLabel();
        lbl_fp_rt = new javax.swing.JLabel();
        lbl_fp_container_right = new javax.swing.JLabel();
        lbl_right_eye = new javax.swing.JLabel();
        lbl_documents_header = new javax.swing.JLabel();
        separator_docs = new javax.swing.JSeparator();
        chk_fp_not_ten_fingers = new javax.swing.JCheckBox();
        chk_sd_citizenship = new javax.swing.JCheckBox();
        chk_sd_marriage = new javax.swing.JCheckBox();
        chk_sd_transfer = new javax.swing.JCheckBox();
        chk_sd_utility = new javax.swing.JCheckBox();
        btn_attachment = new javax.swing.JButton();
        btn_save = new javax.swing.JButton();
        btn_reset = new javax.swing.JButton();
        lbl_left_eye = new javax.swing.JLabel();
        lbl_fp_container_left = new javax.swing.JLabel();
        lbll_fp_container = new javax.swing.JLabel();

        setMaximumSize(new java.awt.Dimension(1350, 680));
        setMinimumSize(new java.awt.Dimension(1350, 680));
        setOpaque(false);
        setPreferredSize(new java.awt.Dimension(1350, 680));
        addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentShown(java.awt.event.ComponentEvent evt) {
                formComponentShown(evt);
            }
        });

        content_panel.setBackground(new Color(213, 134, 145, 123));
        content_panel.setMaximumSize(new java.awt.Dimension(1290, 610));
        content_panel.setMinimumSize(new java.awt.Dimension(1290, 610));
        content_panel.setOpaque(false);
        content_panel.setPreferredSize(new java.awt.Dimension(1290, 610));
        content_panel.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentShown(java.awt.event.ComponentEvent evt) {
                content_panelComponentShown(evt);
            }
        });
        content_panel.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lbl_biometric_header.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lbl_biometric_header.setForeground(new java.awt.Color(51, 153, 255));
        lbl_biometric_header.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lbl_biometric_header.setText("BIOMETRICS");
        content_panel.add(lbl_biometric_header, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 0, 150, 10));

        inp_remark_fp.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 5, 1, 1)));
        content_panel.add(inp_remark_fp, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 430, 290, 20));

        chk_sd_other.setForeground(new java.awt.Color(102, 102, 102));
        chk_sd_other.setText("Other Certificate");
        chk_sd_other.setOpaque(false);
        content_panel.add(chk_sd_other, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 560, 160, 20));

        separator_bio_horizontal.setBorder(javax.swing.BorderFactory.createCompoundBorder());
        content_panel.add(separator_bio_horizontal, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 10, 580, -1));

        lbl_fp_lp.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_lp.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_lp.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_lp.setText("PINKY");
        lbl_fp_lp.setToolTipText("");
        lbl_fp_lp.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_lp.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_lp, new org.netbeans.lib.awtextra.AbsoluteConstraints(490, 220, 100, 110));

        lbl_fp_lr.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_lr.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_lr.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_lr.setText("RING");
        lbl_fp_lr.setToolTipText("");
        lbl_fp_lr.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_lr.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_lr, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 220, 110, 110));

        lbl_fp_lm.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_lm.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_lm.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_lm.setText("MIDDLE");
        lbl_fp_lm.setToolTipText("");
        lbl_fp_lm.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_lm.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_lm, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 220, 100, 110));

        lbl_fp_li.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_li.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_li.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_li.setText("INDEX");
        lbl_fp_li.setToolTipText("");
        lbl_fp_li.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_li.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_li, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 220, 100, 110));

        lbl_fp_lt.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_lt.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_lt.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_lt.setText("THUMB");
        lbl_fp_lt.setToolTipText("");
        lbl_fp_lt.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_lt.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_lt, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 220, 100, 110));

        lbl_fp_rp.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_rp.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_rp.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_rp.setText("PINKY");
        lbl_fp_rp.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_rp.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_rp, new org.netbeans.lib.awtextra.AbsoluteConstraints(490, 380, 100, 110));

        lbl_fp_rr.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_rr.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_rr.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_rr.setText("RING");
        lbl_fp_rr.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_rr.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_rr, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 380, 110, 110));

        lbl_fp_rm.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_rm.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_rm.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_rm.setText("MIDDLE");
        lbl_fp_rm.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_rm.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_rm, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 380, 100, 110));

        lbl_fp_ri.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_ri.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_ri.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_ri.setText("INDEX");
        lbl_fp_ri.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_ri.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_ri, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 380, 100, 110));

        lbl_fp_rt.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_rt.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_rt.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_fp_rt.setText("THUMB");
        lbl_fp_rt.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_fp_rt.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        content_panel.add(lbl_fp_rt, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 380, 100, 110));

        lbl_fp_container_right.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_container_right.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_container_right.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lbl_fp_container_right.setText("<html>&nbsp;&nbsp;RIGHT HAND</html>");
        lbl_fp_container_right.setToolTipText("");
        lbl_fp_container_right.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        lbl_fp_container_right.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        lbl_fp_container_right.setOpaque(true);
        lbl_fp_container_right.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lbl_fp_container_rightMouseClicked(evt);
            }
        });
        content_panel.add(lbl_fp_container_right, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 360, 570, 140));

        lbl_right_eye.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_right_eye.setForeground(new java.awt.Color(102, 102, 102));
        lbl_right_eye.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_right_eye.setText("RIGHT EYE");
        lbl_right_eye.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_right_eye.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        lbl_right_eye.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        lbl_right_eye.setMaximumSize(new java.awt.Dimension(100, 100));
        lbl_right_eye.setMinimumSize(new java.awt.Dimension(100, 100));
        lbl_right_eye.setOpaque(true);
        lbl_right_eye.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lbl_right_eyeMouseClicked(evt);
            }
        });
        content_panel.add(lbl_right_eye, new org.netbeans.lib.awtextra.AbsoluteConstraints(430, 40, 170, 80));

        lbl_documents_header.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lbl_documents_header.setForeground(new java.awt.Color(51, 153, 255));
        lbl_documents_header.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lbl_documents_header.setText("DOCUMENTS PROVIDED");
        content_panel.add(lbl_documents_header, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 460, 150, 10));

        separator_docs.setBorder(javax.swing.BorderFactory.createCompoundBorder());
        content_panel.add(separator_docs, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 470, 290, -1));

        chk_fp_not_ten_fingers.setForeground(new java.awt.Color(102, 102, 102));
        chk_fp_not_ten_fingers.setText("Less than 10 fingers");
        chk_fp_not_ten_fingers.setToolTipText("");
        chk_fp_not_ten_fingers.setOpaque(false);
        content_panel.add(chk_fp_not_ten_fingers, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 540, 290, 20));

        chk_sd_citizenship.setForeground(new java.awt.Color(102, 102, 102));
        chk_sd_citizenship.setText("Citizenship Certificate");
        chk_sd_citizenship.setOpaque(false);
        content_panel.add(chk_sd_citizenship, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 480, 160, 20));

        chk_sd_marriage.setForeground(new java.awt.Color(102, 102, 102));
        chk_sd_marriage.setText("Marriage Certificate");
        chk_sd_marriage.setOpaque(false);
        content_panel.add(chk_sd_marriage, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 500, 160, 20));

        chk_sd_transfer.setForeground(new java.awt.Color(102, 102, 102));
        chk_sd_transfer.setText("Transfer Certificate");
        chk_sd_transfer.setOpaque(false);
        content_panel.add(chk_sd_transfer, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 520, 160, 20));

        chk_sd_utility.setForeground(new java.awt.Color(102, 102, 102));
        chk_sd_utility.setText("Utility Certificate");
        chk_sd_utility.setOpaque(false);
        content_panel.add(chk_sd_utility, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 540, 160, 20));

        btn_attachment.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        btn_attachment.setForeground(new java.awt.Color(102, 102, 102));
        btn_attachment.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/b_scan.png"))); // NOI18N
        btn_attachment.setText("<html><br><br><br><br>Scan</html>");
        btn_attachment.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        btn_attachment.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn_attachment.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_attachmentActionPerformed(evt);
            }
        });
        content_panel.add(btn_attachment, new org.netbeans.lib.awtextra.AbsoluteConstraints(510, 480, 100, 100));

        btn_save.setBackground(new java.awt.Color(255, 255, 255));
        btn_save.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        btn_save.setForeground(new java.awt.Color(102, 102, 102));
        btn_save.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/btn_img_save_20.png"))); // NOI18N
        btn_save.setText("Save");
        btn_save.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        btn_save.setIconTextGap(10);
        btn_save.setMargin(new java.awt.Insets(2, 2, 2, 2));
        btn_save.setMaximumSize(new java.awt.Dimension(80, 30));
        btn_save.setMinimumSize(new java.awt.Dimension(80, 30));
        btn_save.setPreferredSize(new java.awt.Dimension(80, 30));
        btn_save.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_saveActionPerformed(evt);
            }
        });
        content_panel.add(btn_save, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 590, 80, 30));

        btn_reset.setBackground(new java.awt.Color(255, 255, 255));
        btn_reset.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        btn_reset.setForeground(new java.awt.Color(102, 102, 102));
        btn_reset.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/btn_img_reset_20.png"))); // NOI18N
        btn_reset.setText("Reset");
        btn_reset.setToolTipText("");
        btn_reset.setAutoscrolls(true);
        btn_reset.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        btn_reset.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
        btn_reset.setIconTextGap(7);
        btn_reset.setMargin(new java.awt.Insets(2, 2, 2, 2));
        btn_reset.setMaximumSize(new java.awt.Dimension(80, 30));
        btn_reset.setMinimumSize(new java.awt.Dimension(80, 30));
        btn_reset.setPreferredSize(new java.awt.Dimension(80, 30));
        btn_reset.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_resetActionPerformed(evt);
            }
        });
        content_panel.add(btn_reset, new org.netbeans.lib.awtextra.AbsoluteConstraints(440, 590, 80, 30));

        lbl_left_eye.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_left_eye.setForeground(new java.awt.Color(102, 102, 102));
        lbl_left_eye.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbl_left_eye.setText("LEFT EYE");
        lbl_left_eye.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbl_left_eye.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        lbl_left_eye.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        lbl_left_eye.setMaximumSize(new java.awt.Dimension(100, 100));
        lbl_left_eye.setMinimumSize(new java.awt.Dimension(100, 100));
        lbl_left_eye.setOpaque(true);
        lbl_left_eye.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lbl_left_eyeMouseClicked(evt);
            }
        });
        content_panel.add(lbl_left_eye, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 40, 170, 80));

        lbl_fp_container_left.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbl_fp_container_left.setForeground(new java.awt.Color(102, 102, 102));
        lbl_fp_container_left.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lbl_fp_container_left.setText("<html>&nbsp;&nbsp;LEFT HAND</html>");
        lbl_fp_container_left.setToolTipText("");
        lbl_fp_container_left.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        lbl_fp_container_left.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        lbl_fp_container_left.setOpaque(true);
        lbl_fp_container_left.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lbl_fp_container_leftMouseClicked(evt);
            }
        });
        content_panel.add(lbl_fp_container_left, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 200, 570, 150));

        lbll_fp_container.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        lbll_fp_container.setForeground(new java.awt.Color(102, 102, 102));
        lbll_fp_container.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbll_fp_container.setText("FINGERPRINTS");
        lbll_fp_container.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
        lbll_fp_container.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(153, 153, 153), 1, true));
        lbll_fp_container.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lbll_fp_containerMouseClicked(evt);
            }
        });
        content_panel.add(lbll_fp_container, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 190, 590, 330));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(368, Short.MAX_VALUE)
                .addComponent(content_panel, javax.swing.GroupLayout.PREFERRED_SIZE, 634, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(348, 348, 348))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(content_panel, javax.swing.GroupLayout.PREFERRED_SIZE, 628, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(57, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void lbl_fp_container_rightMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lbl_fp_container_rightMouseClicked
        callGreenBitFingerPrint();

    }//GEN-LAST:event_lbl_fp_container_rightMouseClicked

    private void btn_saveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_saveActionPerformed

        try {

            prepareApplicationData();

            boolean dataValidationStatus = isDataValid();
            
            if (dataValidationStatus) {
                dataReady();
            } else {
                dataError();
            }

//            if (false) {
//
//                boolean isUpdate = false;
//
//                business.entity.BioBiometric bioBiometric = new business.entity.BioBiometric();
//                bioBiometric.setPhoto(applicationData.getPhoto());
//                bioBiometric.setSignature(applicationData.getSignature());
//                bioBiometric.setWsqRt(applicationData.getWsqRt());
//                bioBiometric.setWsqRi(applicationData.getWsqRi());
//                bioBiometric.setWsqRm(applicationData.getWsqRm());
//                bioBiometric.setWsqRr(applicationData.getWsqRr());
//                bioBiometric.setWsqRl(applicationData.getWsqRl());
//                bioBiometric.setWsqLt(applicationData.getWsqLt());
//                bioBiometric.setWsqLi(applicationData.getWsqLi());
//                bioBiometric.setWsqLm(applicationData.getWsqLm());
//                bioBiometric.setWsqLr(applicationData.getWsqLr());
//                bioBiometric.setWsqLl(applicationData.getWsqLl());
//                bioBiometric.setFingerRemarks(applicationData.getFingerRemarks());
//                bioBiometric.setEyeLeft(applicationData.getLeft_eye());
//                bioBiometric.setEyeRight(applicationData.getRight_eye());
//
//                BioPerson bioPerson = new BioPerson();
//                if (applicationData.getId() != null && applicationData.getId().intValue() > 0) {
//                    bioPerson.setId(applicationData.getId());
//                    isUpdate = true;
//                }
//                if (applicationData.getBiometricId() != null && applicationData.getBiometricId().intValue() > 0) {
//                    bioBiometric.setId(applicationData.getId());
//                    isUpdate = true;
//                }
//                bioPerson.setBiometric(bioBiometric);
//
//                bioPerson.setNameBn(applicationData.getNameBn());
//                bioPerson.setNameEn(applicationData.getNameEn());
//
//                bioPerson.setGender(applicationData.getGender());
//
//                bioPerson.setFatherName(applicationData.getFatherName());
//                bioPerson.setFatherNid(applicationData.getFatherNid());
//
//                bioPerson.setMotherName(applicationData.getMotherName());
//                bioPerson.setMotherNid(applicationData.getMotherNid());
//
//                bioPerson.setSpouseName(applicationData.getSpouseName());
//                bioPerson.setSpouseNid(applicationData.getSpouseNid());
//                bioPerson.setMaritalStatus(applicationData.getMaritalStatus());
//
//                bioPerson.setNidNumber(applicationData.getNidNumber() != null ? applicationData.getNidNumber() : "");
//                bioPerson.setNidIssueDate(applicationData.getNidIssueDate());
//                bioPerson.setPinNo(applicationData.getPinNo() != null ? applicationData.getPinNo() : "");
//
//                bioPerson.setBirthDistrict(applicationData.getBirthDistrict());
//                bioPerson.setDateOfBirth(applicationData.getDateOfBirth() != null ? applicationData.getDateOfBirth() : "");
//                bioPerson.setNationality(applicationData.getNationality());
//
//                bioPerson.setBirthRegistrationNumber(applicationData.getBirthRegistrationNumber());
//                bioPerson.setBloodGroup(applicationData.getBloodGroup());
//
//                bioPerson.setUniqueIdentificationMark(applicationData.getUniqueIdentificationMark());
//
//                bioPerson.setPresentDivision(applicationData.getPresentDivision());
//                bioPerson.setPresentDistrict(applicationData.getPresentDistrict());
//                bioPerson.setPresentUpozila(applicationData.getPresentUpozila());
//                bioPerson.setPresentRmo(applicationData.getPresentRmo());
//                bioPerson.setPresentCity(applicationData.getPresentCity());
//                bioPerson.setPresentEunion(applicationData.getPresentEunion());
//                bioPerson.setPresentPostOffice(applicationData.getPresentPostOffice());
//                bioPerson.setPresentPostCode(applicationData.getPresentPostCode());
//                bioPerson.setPresentMouza(applicationData.getPresentMouza());
//                bioPerson.setPresentMouzaOtr(applicationData.getPresentMouzaOtr());
//                bioPerson.setPresentVillage(applicationData.getPresentVillage());
//                bioPerson.setPresentVillageOtr(applicationData.getPresentVillageOtr());
//                bioPerson.setPresentHouseNo(applicationData.getPresentHouseNo());
//
//                bioPerson.setPermDivision(applicationData.getPermDivision());
//                bioPerson.setPermDistrict(applicationData.getPermDistrict());
//                bioPerson.setPermUpozila(applicationData.getPermUpozila());
//                bioPerson.setPermanentRmo(applicationData.getPermanentRmo());
//                bioPerson.setPermanentCity(applicationData.getPermanentCity());
//                bioPerson.setPermanentEunion(applicationData.getPermanentEunion());
//                bioPerson.setPermanentPostOffice(applicationData.getPermanentPostOffice());
//                bioPerson.setPermanentPostCode(applicationData.getPermanentPostCode());
//                bioPerson.setPermanentMouza(applicationData.getPermanentMouza());
//                bioPerson.setPermanentMouzaOtr(applicationData.getPermanentMouzaOtr());
//                bioPerson.setPermanentVillage(applicationData.getPermanentVillage());
//                bioPerson.setPermanentVillageOtr(applicationData.getPermanentVillageOtr());
//                bioPerson.setPermanentHouseNo(applicationData.getPermanentHouseNo());
//
//                bioPerson.setVoterAt(applicationData.getVoterAt());
//                bioPerson.setVoterArea(applicationData.getVoterArea());
//
//                bioPerson.setHandicapInfo(applicationData.getHandicapInfo());
//                bioPerson.setHandicapRemarks(applicationData.getHandicapRemarks());
//
//                bioPerson.setEducationLevel(applicationData.getEducationLevel());
//                bioPerson.setProfession(applicationData.getProfession());
//                bioPerson.setReligion(applicationData.getReligion());
//
//                bioPerson.setPhone(applicationData.getPhone());
//                bioPerson.setMobile(applicationData.getMobile());
//                bioPerson.setEmail(applicationData.getEmail());
//
//                bioPerson.setPassport(applicationData.getPassport());
//                bioPerson.setTin(applicationData.getTin());
//                bioPerson.setDlNumber(applicationData.getDlNumber());
//
//                PersonManagerBean personManagerBean = new PersonManagerBean();
//                AddBioPersonResponse resp = personManagerBean.insertUpdatePerson(bioPerson);
//
//                if (resp.isOperationStatus()) {
//
//                    applicationData.setId(resp.getBioPerson().getId());
//                    personManagerBean.deleteAndInsertAttachment(applicationData);
//
//                    applicationData = new ApplicationData();
//
//                    resetEnrollmentApplication();
//
//                    JOptionPane.showMessageDialog(null, "Data Saved Successfully", "SUCCESS", JOptionPane.INFORMATION_MESSAGE);
//
//                } else {
//
//                    JOptionPane.showMessageDialog(null, "Failed To Save", "ERROR", JOptionPane.ERROR_MESSAGE);
//
//                }
//
//            }
        } catch (Exception ex) {

            ex.printStackTrace();

        }

    }//GEN-LAST:event_btn_saveActionPerformed

    private void cmb_present_add_divisionActionPerformed(java.awt.event.ActionEvent evt) {
    }

    private void btn_attachmentActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_attachmentActionPerformed

        Scanner frm = new Scanner();
        frm.setVisible(true);
        frm.cmb_attachment_type.setSelectedIndex(0);
        frm.onTypeChange();

    }//GEN-LAST:event_btn_attachmentActionPerformed

    private void btn_resetActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_resetActionPerformed

        resetEnrollmentApplication();

    }//GEN-LAST:event_btn_resetActionPerformed

    private void lbl_left_eyeMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lbl_left_eyeMouseClicked

//        JOptionPane.showMessageDialog(null, "Capture left eye", "INFO", JOptionPane.INFORMATION_MESSAGE);
        IrisForm irisForm = new IrisForm(Defs.IRIS_IDX_LEFT);
        irisForm.setLocationRelativeTo(null);
        irisForm.setTitle("Eye Capture (Left)");
        irisForm.setVisible(true);

    }//GEN-LAST:event_lbl_left_eyeMouseClicked

    private void lbl_right_eyeMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lbl_right_eyeMouseClicked

//        JOptionPane.showMessageDialog(null, "Capture right eye", "INFO", JOptionPane.INFORMATION_MESSAGE);
        IrisForm irisForm = new IrisForm(Defs.IRIS_IDX_RIGHT);
        irisForm.setLocationRelativeTo(null);
        irisForm.setTitle("Eye Capture (Right)");
        irisForm.setVisible(true);

    }//GEN-LAST:event_lbl_right_eyeMouseClicked

    private void lbl_fp_container_leftMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lbl_fp_container_leftMouseClicked
        callGreenBitFingerPrint();

    }//GEN-LAST:event_lbl_fp_container_leftMouseClicked

    private void lbll_fp_containerMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lbll_fp_containerMouseClicked
        callGreenBitFingerPrint();

    }//GEN-LAST:event_lbll_fp_containerMouseClicked

    private void formComponentShown(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_formComponentShown
//        setPlaceHolder();
//        resetEnrollmentApplication();
    }//GEN-LAST:event_formComponentShown

    private void content_panelComponentShown(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_content_panelComponentShown
    }//GEN-LAST:event_content_panelComponentShown

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btn_attachment;
    private javax.swing.JButton btn_reset;
    private javax.swing.JButton btn_save;
    public static javax.swing.JCheckBox chk_fp_not_ten_fingers;
    public static javax.swing.JCheckBox chk_sd_citizenship;
    public static javax.swing.JCheckBox chk_sd_marriage;
    public static javax.swing.JCheckBox chk_sd_other;
    public static javax.swing.JCheckBox chk_sd_transfer;
    public static javax.swing.JCheckBox chk_sd_utility;
    private javax.swing.JPanel content_panel;
    private javax.swing.ButtonGroup genderButtonGroup;
    public static javax.swing.JTextField inp_remark_fp;
    private javax.swing.JLabel lbl_biometric_header;
    private javax.swing.JLabel lbl_documents_header;
    private javax.swing.JLabel lbl_fp_container_left;
    private javax.swing.JLabel lbl_fp_container_right;
    public static javax.swing.JLabel lbl_fp_li;
    public static javax.swing.JLabel lbl_fp_lm;
    public static javax.swing.JLabel lbl_fp_lp;
    public static javax.swing.JLabel lbl_fp_lr;
    public static javax.swing.JLabel lbl_fp_lt;
    public static javax.swing.JLabel lbl_fp_ri;
    public static javax.swing.JLabel lbl_fp_rm;
    public static javax.swing.JLabel lbl_fp_rp;
    public static javax.swing.JLabel lbl_fp_rr;
    public static javax.swing.JLabel lbl_fp_rt;
    public static javax.swing.JLabel lbl_left_eye;
    public static javax.swing.JLabel lbl_right_eye;
    private javax.swing.JLabel lbll_fp_container;
    private javax.swing.JSeparator separator_bio_horizontal;
    private javax.swing.JSeparator separator_docs;
    // End of variables declaration//GEN-END:variables

    private void setPlaceHolder() {
        
        applicationData = new ApplicationData();

      /*  PromptSupport.setPrompt("Name Bangla", inp_name_bangla);
        PromptSupport.setForeground(Color.GRAY, inp_name_bangla);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_name_bangla);

        PromptSupport.setPrompt("Name English", inp_name_english);
        PromptSupport.setForeground(Color.GRAY, inp_name_english);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_name_english);

        PromptSupport.setPrompt("Spouse Name", inp_name_spouse);
        PromptSupport.setForeground(Color.GRAY, inp_name_spouse);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_name_spouse);

        PromptSupport.setPrompt("Mother Name", inp_name_mother);
        PromptSupport.setForeground(Color.GRAY, inp_name_mother);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_name_mother);

        PromptSupport.setPrompt("Father Name", inp_name_father);
        PromptSupport.setForeground(Color.GRAY, inp_name_father);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_name_father);

        PromptSupport.setPrompt("Spouse's NID", inp_spouse_nid);
        PromptSupport.setForeground(Color.GRAY, inp_spouse_nid);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_spouse_nid);

        PromptSupport.setPrompt("Mother's NID", inp_mother_nid);
        PromptSupport.setForeground(Color.GRAY, inp_mother_nid);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_mother_nid);

        PromptSupport.setPrompt("Father's NID", inp_father_nid);
        PromptSupport.setForeground(Color.GRAY, inp_father_nid);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_father_nid);

        PromptSupport.setPrompt("10 digit NID", inp_nid);
        PromptSupport.setForeground(Color.GRAY, inp_nid);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_nid);

        PromptSupport.setPrompt("17 digit NID (PIN)", inp_nid_old);
        PromptSupport.setForeground(Color.GRAY, inp_nid_old);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_nid_old);

        PromptSupport.setPrompt("Nationality", inp_nationality);
        PromptSupport.setForeground(Color.GRAY, inp_nationality);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_nationality);

        PromptSupport.setPrompt("17 digit Birth Reg. No.", inp_birth_registration_no);
        PromptSupport.setForeground(Color.GRAY, inp_birth_registration_no);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_birth_registration_no);

        PromptSupport.setPrompt("Additional Mouza", inp_present_mouza_otr);
        PromptSupport.setForeground(Color.GRAY, inp_present_mouza_otr);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_present_mouza_otr);

        PromptSupport.setPrompt("Additional Village", inp_present_village_otr);
        PromptSupport.setForeground(Color.GRAY, inp_present_village_otr);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_present_village_otr);

        PromptSupport.setPrompt("Additional Mouza", inp_permanent_mouza_otr);
        PromptSupport.setForeground(Color.GRAY, inp_permanent_mouza_otr);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_permanent_mouza_otr);

        PromptSupport.setPrompt("Additional Village", inp_permanent_village_otr);
        PromptSupport.setForeground(Color.GRAY, inp_permanent_village_otr);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_permanent_village_otr);

        PromptSupport.setPrompt("Remarks", txt_handicap_remarks);
        PromptSupport.setForeground(Color.GRAY, txt_handicap_remarks);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, txt_handicap_remarks);

        PromptSupport.setPrompt("Remarks", inp_remark_fp);
        PromptSupport.setForeground(Color.GRAY, inp_remark_fp);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_remark_fp);

        PromptSupport.setPrompt("Telephone", inp_telephone);
        PromptSupport.setForeground(Color.GRAY, inp_telephone);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_telephone);

        PromptSupport.setPrompt("Mobile", inp_mobile);
        PromptSupport.setForeground(Color.GRAY, inp_mobile);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_mobile);

        PromptSupport.setPrompt("Email", inp_email);
        PromptSupport.setForeground(Color.GRAY, inp_email);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_email);

        PromptSupport.setPrompt("Passport No.", inp_passport);
        PromptSupport.setForeground(Color.GRAY, inp_passport);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_passport);

        PromptSupport.setPrompt("TIN No.", inp_tin_no);
        PromptSupport.setForeground(Color.GRAY, inp_tin_no);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_tin_no);

        PromptSupport.setPrompt("Driving License No.", inp_drv_license);
        PromptSupport.setForeground(Color.GRAY, inp_drv_license);
        PromptSupport.setFocusBehavior(PromptSupport.FocusBehavior.HIDE_PROMPT, inp_drv_license); */

    }

    public void viewDetails(String detailsId ) {
        //CardLayout card1 = (CardLayout) imagePanel1.getLayout();
        //card1.show(imagePanel1, "app");

//    applicationMenu.setBackground(new Color(51,153,255));

        /*ContainerJFrame.applicationMenu.setBackground(new Color(204, 204, 204));
         ContainerJFrame.applicationMenu.setBorder(javax.swing.BorderFactory.createLineBorder(Color.DARK_GRAY, 1, false));
         ContainerJFrame.applicationMenu.setBorderPainted(true);
         ContainerJFrame.applicationMenu.setOpaque(true);
         ContainerJFrame.applicationMenu.setSelected(true);
         ContainerJFrame.registrationMenu.setBackground(new Color(240, 240, 240));
         ContainerJFrame.registrationMenu.setOpaque(false);
         ContainerJFrame.registrationMenu.setSelected(false);
         ContainerJFrame.registrationMenu.setBorderPainted(false);
         ContainerJFrame.dashboardMenu.setBackground(new Color(240, 240, 240));
         ContainerJFrame.dashboardMenu.setOpaque(false);
         ContainerJFrame.dashboardMenu.setSelected(false);
         ContainerJFrame.dashboardMenu.setBorderPainted(false);
         ContainerJFrame.nidRegisterMenu.setBackground(new Color(240, 240, 240));
         ContainerJFrame.nidRegisterMenu.setOpaque(false);
         ContainerJFrame.nidRegisterMenu.setSelected(false);
         ContainerJFrame.nidRegisterMenu.setBorderPainted(false);*/

        applicationData = new ApplicationData();

        BioPerson bioData = new BioPerson();
        PersonManagerBean pmb = new PersonManagerBean();

        GetPersonSummaryResponse resp = pmb.getSinglePersonInfo(detailsId);
        System.out.println("details Id: "+detailsId);
        if (resp != null && resp.isOperationStatus() && resp.getSinglePerson() != null) {
            populateFormByDatabaseData(resp.getSinglePerson());
            
        } else {
            JOptionPane.showMessageDialog(null, "No Data Found", "INFO", JOptionPane.INFORMATION_MESSAGE);
        }

    }

    private void populateFormByDatabaseData(BioPerson bioPerson) {

        applicationData = new ApplicationData();
        applicationData.setId(bioPerson.getId());
        applicationData.setDateOfBirth(bioPerson.getDateOfBirth());
        applicationData.setPinNo(bioPerson.getPinNo());
        //applicationData.setBiometricId();
        
       /* cmb_present_division.removeAllItems();
        
        for (Division dv : Lookup.DIVISION_LIST) {
        cmb_present_division.addItem(new Item<String>(dv.getId(), dv.getNameEn()));
        }        
        
        */
        
        
        System.out.println("populate");

        //Attachment population
        BioAttachmentEntityManagerBean bmb = new BioAttachmentEntityManagerBean();

        List<BioAttachment> bioAttachmentList = bmb.getAttachmentFindByPersonId(bioPerson.getId());

        if (bioAttachmentList != null && bioAttachmentList.size() > 0) {
            String aType = "";
            //System.out.println("HOHGJGJGOGOJGJGJJGJGJKLJKGJGJGJGJ");
            for (BioAttachment ba : bioAttachmentList) {
                if (ba.getAttachmentType() != null && !ba.getAttachmentType().isEmpty()) {
                    aType = ba.getAttachmentType();

                    if (aType.equalsIgnoreCase(Scanner.TYPE_CITIZENSHIP)) {
                        applicationData.setCitizenshipAttachment1(ba.getAttachmentOne());
                        applicationData.setCitizenshipAttachment2(ba.getAttachmentTwo());

                        chk_sd_citizenship.setSelected(true);


                    } else if (aType.equalsIgnoreCase(Scanner.TYPE_MARRIAGE)) {
                        applicationData.setMarriageAttachment1(ba.getAttachmentOne());
                        applicationData.setMarriageAttachment2(ba.getAttachmentTwo());
                        chk_sd_marriage.setSelected(true);
                    } else if (aType.equalsIgnoreCase(Scanner.TYPE_OTHER)) {
                        applicationData.setOtherAttachment1(ba.getAttachmentOne());
                        applicationData.setOtherAttachment2(ba.getAttachmentTwo());
                        chk_sd_other.setSelected(true);
                    } else if (aType.equalsIgnoreCase(Scanner.TYPE_UTILITY)) {
                        applicationData.setUtilityAttachment1(ba.getAttachmentOne());
                        applicationData.setUtilityAttachment2(ba.getAttachmentTwo());
                        chk_sd_utility.setSelected(true);
                    } else if (aType.equalsIgnoreCase(Scanner.TYPE_TRANSFER)) {
                        applicationData.setTransferAttachment1(ba.getAttachmentOne());
                        applicationData.setTransferAttachment2(ba.getAttachmentTwo());
                        chk_sd_transfer.setSelected(true);
                    }
                }
            }
        }

        //Biometric population
        if (bioPerson.getBiometric() != null) {
            business.entity.BioBiometric bio = bioPerson.getBiometric();
            applicationData.setBiometricId(bio.getId());
            System.out.println("BioMetricId: " + applicationData.getBiometricId());
            applicationData.setWsqLt(bio.getWsqLt());
            applicationData.setWsqLi(bio.getWsqLi());
            applicationData.setWsqLm(bio.getWsqLm());
            applicationData.setWsqLr(bio.getWsqLr());
            applicationData.setWsqLl(bio.getWsqLl());

            applicationData.setWsqRt(bio.getWsqRt());
            applicationData.setWsqRi(bio.getWsqRi());
            applicationData.setWsqRm(bio.getWsqRm());
            applicationData.setWsqRr(bio.getWsqRr());
            applicationData.setWsqRl(bio.getWsqRl());

            if (bio.getPhoto() != null) {
                try {
                    BufferedImage bim = ImageAndFileProcessing.ByteArrayToBufferedImage(bio.getPhoto());
                    ApplicationNidPanel.lbl_photo.setIcon(new ImageIcon(bim.getScaledInstance(ApplicationNidPanel.lbl_photo.getWidth(), ApplicationNidPanel.lbl_photo.getHeight(), java.awt.Image.SCALE_DEFAULT)));
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            } else {
                ApplicationNidPanel.lbl_photo.setIcon(null);
                System.out.println("photo is null !!!!!!!!!!!!!!!!!!");
            }

            if (bio.getSignature() != null) {
                try {
                    BufferedImage bim = ImageAndFileProcessing.ByteArrayToBufferedImage(bio.getSignature());
                    ApplicationNidPanel.lbl_signature.setIcon(new ImageIcon(bim.getScaledInstance(ApplicationNidPanel.lbl_signature.getWidth(), ApplicationNidPanel.lbl_signature.getHeight(), java.awt.Image.SCALE_DEFAULT)));
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            } else {
                ApplicationNidPanel.lbl_signature.setIcon(null);
                System.out.println("signature is null !!!!!!!!!!!!!!!!!!");
            }


            showWsqImageinJLabel(lbl_fp_lt, bio.getWsqLt());
            showWsqImageinJLabel(lbl_fp_li, bio.getWsqLi());
            showWsqImageinJLabel(lbl_fp_lm, bio.getWsqLm());
            showWsqImageinJLabel(lbl_fp_lr, bio.getWsqLr());
            showWsqImageinJLabel(lbl_fp_lp, bio.getWsqLl());

            showWsqImageinJLabel(lbl_fp_rt, bio.getWsqRt());
            showWsqImageinJLabel(lbl_fp_ri, bio.getWsqRi());
            showWsqImageinJLabel(lbl_fp_rm, bio.getWsqRm());
            showWsqImageinJLabel(lbl_fp_rr, bio.getWsqRr());
            showWsqImageinJLabel(lbl_fp_rp, bio.getWsqRl());

            //marzuq (eye)
            //left
            if (bio.getEyeLeft() != null) {
                try {
                    BufferedImage bieye = IrisUtils.getGrayscale(640, 480, bio.getEyeLeft());
                    
                    /*
                    ApplicationNidPanel.lbl_left_eye.setText(null);
                    ApplicationNidPanel.lbl_left_eye.setIcon(new ImageIcon(bieye.getScaledInstance(ApplicationNidPanel.lbl_left_eye.getWidth(), ApplicationNidPanel.lbl_left_eye.getHeight(), java.awt.Image.SCALE_DEFAULT)));
                    */
                    
                    BiometricNidPanel.lbl_left_eye.setText(null);
                    BiometricNidPanel.lbl_left_eye.setIcon(new ImageIcon(bieye.getScaledInstance(BiometricNidPanel.lbl_left_eye.getWidth(), BiometricNidPanel.lbl_left_eye.getHeight(), java.awt.Image.SCALE_DEFAULT)));
                    
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            } else {
                //ApplicationNidPanel.lbl_left_eye.setIcon(null);
                BiometricNidPanel.lbl_left_eye.setIcon(null);
                System.out.println("left eye is null !!!!!!!!!!!!!!!!!!");
            }

            //right
            if (bio.getEyeRight() != null) {
                try {
                    BufferedImage bieye = IrisUtils.getGrayscale(640, 480, bio.getEyeRight());
                    
                    /*
                    ApplicationNidPanel.lbl_right_eye.setText(null);
                    ApplicationNidPanel.lbl_right_eye.setIcon(new ImageIcon(bieye.getScaledInstance(ApplicationNidPanel.lbl_right_eye.getWidth(), ApplicationNidPanel.lbl_right_eye.getHeight(), java.awt.Image.SCALE_DEFAULT)));
                    
                    */
                    
                    BiometricNidPanel.lbl_right_eye.setText(null);
                    BiometricNidPanel.lbl_right_eye.setIcon(new ImageIcon(bieye.getScaledInstance(BiometricNidPanel.lbl_right_eye.getWidth(), BiometricNidPanel.lbl_right_eye.getHeight(), java.awt.Image.SCALE_DEFAULT)));
                
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            } else {
                //ApplicationNidPanel.lbl_right_eye.setIcon(null);
                BiometricNidPanel.lbl_right_eye.setIcon(null);
                System.out.println("right eye is null !!!!!!!!!!!!!!!!!!");
            }

            applicationData.setLeft_eye(bio.getEyeLeft());
            applicationData.setRight_eye(bio.getEyeRight());

            //marzuq (eye)


            applicationData.setSignature(bio.getSignature());
            applicationData.setFingerRemarks(bio.getFingerRemarks());
            inp_remark_fp.setText(bio.getFingerRemarks());
            if (bio.getFingerRemarks() != null && !bio.getFingerRemarks().isEmpty()) {
                chk_fp_not_ten_fingers.setSelected(true);
            }

        }

        //Text and other data population

       /* inp_name_bangla.setText(bioPerson.getNameBn());
        inp_name_english.setText(bioPerson.getNameEn());

        if (bioPerson.getGender() != null && !bioPerson.getGender().isEmpty()) {
            applicationData.setGender(bioPerson.getGender());

            if (applicationData.getGender().equalsIgnoreCase(Lookup.MALE)) {
                rdo_gender_male.setSelected(true);
            } else if (applicationData.getGender().equalsIgnoreCase(Lookup.FEMALE)) {
                rdo_gender_female.setSelected(true);
            } else if (applicationData.getGender().equalsIgnoreCase(Lookup.THIRD_GENDER)) {
                rdo_gender_third.setSelected(true);
            }
        } */

        /*inp_name_father.setText(bioPerson.getFatherName());
        inp_father_nid.setText(bioPerson.getFatherNid());
        inp_name_mother.setText(bioPerson.getMotherName());
        inp_mother_nid.setText(bioPerson.getMotherNid());
        inp_name_spouse.setText(bioPerson.getSpouseName());
        inp_spouse_nid.setText(bioPerson.getSpouseNid());
        applicationData.setMaritalStatus(bioPerson.getMaritalStatus());
        setSelectedValueLookup(cmb_marital_status, bioPerson.getMaritalStatus(), Lookup.MARITAL_STATUS_LIST);
        inp_nid.setText(bioPerson.getNidNumber());
        if (bioPerson.getNidIssueDate() != null) {
            try {
                cal_nid_issue_date.setDate(Defs.SDF.parse(bioPerson.getNidIssueDate()));
            } catch (Exception ex) {
            }
        }

        applicationData.setBirthDistrict(bioPerson.getBirthDistrict());
        setSelectedValueDistrict(cmb_birth_place_district, bioPerson.getBirthDistrict());

        inp_nid_old.setText(bioPerson.getPinNo());
        if (bioPerson.getDateOfBirth() != null) {
            try {
                cal_date_of_birth.setDate(Defs.SDF.parse(bioPerson.getDateOfBirth()));
            } catch (Exception ex) {
            }
        }
        inp_nationality.setText(bioPerson.getNationality());
        inp_birth_registration_no.setText(bioPerson.getBirthRegistrationNumber());
        applicationData.setBloodGroup(bioPerson.getBloodGroup());
        setSelectedValueLookup(cmb_blood_grp, bioPerson.getBloodGroup(), Lookup.BLOOD_GRP_LIST);
        inp_uim.setText(bioPerson.getUniqueIdentificationMark());*/

        //Address details missing

//        applicationData.setNidIssueDivision(bioPerson.getNidIssueDivision());

       /* applicationData.setPresentDivision(bioPerson.getPresentDivision());
        applicationData.setPresentDistrict(bioPerson.getPresentDistrict());
        applicationData.setPresentUpozila(bioPerson.getPresentUpozila());
        applicationData.setPresentRmo(bioPerson.getPresentRmo());
        applicationData.setPresentCity(bioPerson.getPresentCity());
        applicationData.setPresentEunion(bioPerson.getPresentEunion());
        applicationData.setPresentMouza(bioPerson.getPresentMouza());
        applicationData.setPresentMouzaOtr(bioPerson.getPresentMouzaOtr());
        inp_present_mouza_otr.setText(bioPerson.getPresentMouzaOtr());
        applicationData.setPresentVillage(bioPerson.getPresentVillage());
        applicationData.setPresentVillageOtr(bioPerson.getPresentVillageOtr());
        inp_present_village_otr.setText(bioPerson.getPresentVillageOtr());
        applicationData.setPresentHouseNo(bioPerson.getPresentStreet());
        inp_present_house.setText(bioPerson.getPresentStreet());
        applicationData.setPresentPostOffice(bioPerson.getPresentPostOffice());
        applicationData.setPresentPostCode(bioPerson.getPresentPostCode());
        inp_present_postcode.setText(bioPerson.getPresentPostCode()); */

      /*  applicationData.setPermDivision(bioPerson.getPermDivision());
        applicationData.setPermDistrict(bioPerson.getPermDistrict());
        applicationData.setPermUpozila(bioPerson.getPermUpozila());
        applicationData.setPermanentRmo(bioPerson.getPermanentRmo());
        applicationData.setPermanentCity(bioPerson.getPermanentCity());
        applicationData.setPermanentEunion(bioPerson.getPermanentEunion());
        applicationData.setPermanentMouza(bioPerson.getPermanentMouza());
        applicationData.setPermanentMouzaOtr(bioPerson.getPermanentMouzaOtr());
        inp_present_mouza_otr.setText(bioPerson.getPermanentMouzaOtr());
        applicationData.setPermanentVillage(bioPerson.getPermanentVillage());
        applicationData.setPermanentVillageOtr(bioPerson.getPermanentVillageOtr());
        inp_present_village_otr.setText(bioPerson.getPresentVillageOtr()); 
        inp_permanent_village_otr.setText(bioPerson.getPermanentVillageOtr()); 
        
        String pvo=inp_permanent_village_otr.getText();         //dummy */

       /* applicationData.setVoterArea(bioPerson.getVoterArea());
        applicationData.setVoterAt(bioPerson.getVoterAt());
        setSelectedValueLookup(cmb_voter_at, bioPerson.getVoterAt(), Lookup.VOTER_AT_LIST);

        pvo=inp_permanent_village_otr.getText();         //dummy

        applicationData.setPermanentHouseNo(bioPerson.getPermStreet());
        inp_permanent_house.setText(bioPerson.getPermStreet());

        applicationData.setPermanentPostOffice(bioPerson.getPermanentPostOffice());
        applicationData.setPermanentPostCode(bioPerson.getPermanentPostCode());
        inp_present_postcode.setText(bioPerson.getPermanentPostCode());
        pvo=inp_permanent_village_otr.getText();         //dummy
        applicationData.setPermDivision(bioPerson.getPermDivision());
        applicationData.setPermDistrict(bioPerson.getPermDistrict());
        applicationData.setPermUpozila(bioPerson.getPermUpozila());

        //new code for setting present and permanent district
        setSelectedValueDivision(cmb_present_division, bioPerson.getPresentDivision());
        //setSelectedValueDistrict(cmb_present_district, bioPerson.getPresentDistrict());
        //setSelectedValueUpozilla(cmb_present_upozila, bioPerson.getPresentUpozila());
        setSelectedValueDivision(cmb_permanent_division, bioPerson.getPermDivision());
        //setSelectedValueDistrict(cmb_permanent_district, bioPerson.getPermDistrict());
        //setSelectedValueUpozilla(cmb_present_upozila, bioPerson.getPermUpozila()); 

        //Address details missing
        pvo=inp_permanent_village_otr.getText();         //dummy
        if (bioPerson.getHandicapInfo() != null && !bioPerson.getHandicapInfo().isEmpty()) {
            String[] comSeps = bioPerson.getHandicapInfo().split(",");

            for (int i = 0; i < comSeps.length; i++) {

                if (comSeps[i].equalsIgnoreCase("amputent")) {
                    chk_handicap_amputant.setSelected(true);
                }
                if (comSeps[i].equalsIgnoreCase("deaf")) {
                    chk_handicap_deaf.setSelected(true);
                }
                if (comSeps[i].equalsIgnoreCase("mute")) {
                    chk_handicap_mute.setSelected(true);
                }
                if (comSeps[i].equalsIgnoreCase("others")) {
                    chk_handicap_others.setSelected(true);
                }
                if (comSeps[i].equalsIgnoreCase("speech")) {
                    chk_handicap_speech.setSelected(true);
                }
                if (comSeps[i].equalsIgnoreCase("visual")) {
                    chk_handicap_visual.setSelected(true);
                }
            }
        }

        pvo=inp_permanent_village_otr.getText();         //dummy        
        
        txt_handicap_remarks.setText(bioPerson.getHandicapRemarks());

        applicationData.setEducationLevel(bioPerson.getEducationLevel());
        setSelectedValueLookup(cmb_education, bioPerson.getEducationLevel(), Lookup.EDUCATION_LIST);
        applicationData.setProfession(bioPerson.getProfession());
        setSelectedValueLookup(cmb_profession, bioPerson.getProfession(), Lookup.PROFESSION_LIST);
        applicationData.setReligion(bioPerson.getReligion());
        setSelectedValueLookup(cmb_religion, bioPerson.getReligion(), Lookup.RELIGION_LIST);

        inp_telephone.setText(bioPerson.getPhone());
        inp_mobile.setText(bioPerson.getMobile());
        inp_email.setText(bioPerson.getEmail());

        inp_passport.setText(bioPerson.getDlNumber());
        inp_tin_no.setText(bioPerson.getTin());
        inp_drv_license.setText(bioPerson.getPassport()); 
        
      */
    }
    
    
   
    
    

 

    public static void setSelectedValueDistrict(JComboBox comboBox, String value) {
        String desc = "";
        for (District dt : Lookup.DISTRICT_LIST) {
            if (dt.getId().equalsIgnoreCase(value)) {
                desc = dt.getNameEn();
                break;
            }
        }

        if (desc == "") {
            return;
        }

        for (int i = 0; i < comboBox.getItemCount(); i++) {
            String val = (String) comboBox.getItemAt(i).toString();
            if (val.equalsIgnoreCase(desc)) {
                comboBox.setSelectedIndex(i);
                break;
            }
        }
    }
    
  
    public static void showWsqImageinJLabel(JLabel jlbl, byte[] wsq) {
        if (wsq == null) {
            System.out.println("wsq is nullllllllllllllllllll");
            jlbl.setIcon(null);
            return;
        }

        try {
            WsqDecoder deco = new WsqDecoder();
            Bitmap bitmap = deco.decode(wsq);
            BufferedImage bim = convert(bitmap);
            jlbl.setIcon(new ImageIcon(bim.getScaledInstance(jlbl.getWidth(), jlbl.getHeight(), java.awt.Image.SCALE_DEFAULT)));

        } catch (Exception ex) {
            System.out.println("error occurred while converting wsq to image");
            ex.printStackTrace();

        }

    }

    private static BufferedImage convert(Bitmap bitmap) {
        int width = bitmap.getWidth();
        int height = bitmap.getHeight();
        byte[] data = bitmap.getPixels();
        BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);
        WritableRaster raster = image.getRaster();
        raster.setDataElements(0, 0, width, height, data);
        return image;
    }

    public void resetEnrollmentApplication() {
        
        ApplicationNidPanel.applicationData=new ApplicationData();

        /*setDefaultTextField(inp_name_bangla, true);
        setDefaultTextField(inp_name_english, true);
        setDefaultTextField(inp_name_father, true);
        setDefaultTextField(inp_father_nid, true);
        setDefaultTextField(inp_name_mother, true);
        setDefaultTextField(inp_mother_nid, true);
        setDefaultTextField(inp_name_spouse, true);
        setDefaultTextField(inp_spouse_nid, true);
        setDefaultTextField(inp_nid, true);
        setDefaultTextField(inp_nid_old, true);
        setDefaultTextField(inp_nationality, true);
        setDefaultTextField(inp_birth_registration_no, true);
        setDefaultTextField(inp_uim, true);

        setDefaultTextField(inp_present_mouza_otr, true);
        setDefaultTextField(inp_permanent_mouza_otr, true);
        setDefaultTextField(inp_present_house, true);
        setDefaultTextField(inp_present_village_otr, true);
        setDefaultTextField(inp_permanent_village_otr, true);
        setDefaultTextField(inp_permanent_house, true);

        setDefaultTextField(inp_telephone, true);
        setDefaultTextField(inp_mobile, true);
        setDefaultTextField(inp_email, true);

        setDefaultTextField(inp_passport, true);
        setDefaultTextField(inp_drv_license, true);
        setDefaultTextField(inp_tin_no, true);

        setDefaultTextField(inp_remark_fp, true);

        setDefaultTextField(inp_present_postcode, true);
        setDefaultTextField(inp_permanent_postcode, true);

        txt_handicap_remarks.setText("");

        setDefaultComboBox(cmb_marital_status, true);
        setDefaultComboBox(cmb_birth_place_district, true);
        setDefaultComboBox(cmb_blood_grp, true);
        setDefaultComboBox(cmb_present_division, true);
        setDefaultComboBox(cmb_present_district, true);
        setDefaultComboBox(cmb_present_upozila, true);
        setDefaultComboBox(cmb_present_rmo, true);
        setDefaultComboBox(cmb_present_city, true);
        setDefaultComboBox(cmb_present_eunion, true);
        setDefaultComboBox(cmb_present_mouza, true);
        setDefaultComboBox(cmb_present_village, true);
        setDefaultComboBox(cmb_present_postoffice, true);
        setDefaultComboBox(cmb_permanent_division, true);
        setDefaultComboBox(cmb_permanent_district, true);
        setDefaultComboBox(cmb_permanent_upozila, true);
        setDefaultComboBox(cmb_permanent_rmo, true);
        setDefaultComboBox(cmb_permanent_city, true);
        setDefaultComboBox(cmb_permanent_eunion, true);
        setDefaultComboBox(cmb_permanent_mouza, true);
        setDefaultComboBox(cmb_permanent_village, true);
        setDefaultComboBox(cmb_permanent_postoffice, true);
        setDefaultComboBox(cmb_voter_at, true);
        setDefaultComboBox(cmb_education, true);
        setDefaultComboBox(cmb_profession, true);
        setDefaultComboBox(cmb_religion, true);
        setDefaultComboBox(cmb_voter_area, true);

        genderButtonGroup.clearSelection();
        rdo_gender_male.setBorderPainted(false);
        rdo_gender_male.setBorder(null);
        rdo_gender_female.setBorderPainted(true);
        rdo_gender_female.setBorder(null);
        rdo_gender_third.setBorderPainted(true);
        rdo_gender_third.setBorder(null);

        setDefaultCalField(cal_date_of_birth, true);
        setDefaultCalField(cal_nid_issue_date, true);*/

        chk_fp_not_ten_fingers.setSelected(false);
        /*chk_handicap_amputant.setSelected(false);
        chk_handicap_deaf.setSelected(false);
        chk_handicap_mute.setSelected(false);
        chk_handicap_others.setSelected(false);
        chk_handicap_speech.setSelected(false);
        chk_handicap_visual.setSelected(false);*/
        chk_sd_citizenship.setSelected(false);
        chk_sd_marriage.setSelected(false);
        chk_sd_other.setSelected(false);
        chk_sd_transfer.setSelected(false);
        chk_sd_utility.setSelected(false);

        lbl_fp_lt.setIcon(null);
        lbl_fp_li.setIcon(null);
        lbl_fp_lm.setIcon(null);
        lbl_fp_lr.setIcon(null);
        lbl_fp_lp.setIcon(null);
        lbl_fp_rt.setIcon(null);
        lbl_fp_ri.setIcon(null);
        lbl_fp_rm.setIcon(null);
        lbl_fp_rr.setIcon(null);
        lbl_fp_rp.setIcon(null);
        lbl_left_eye.setIcon(null);
        lbl_left_eye.setText("LEFT EYE");
        lbl_right_eye.setIcon(null);
        lbl_right_eye.setText("RIGHT EYE");
        //lbl_signature.setIcon(null);
        //lbl_signature.setText("SIGNATURE");
        //lbl_photo.setIcon(null);
        //lbl_photo.setText("PHOTO");
    }

    public void viewCardData(HashMap<String, String> data) {
        CardLayout card1 = (CardLayout) imagePanel1.getLayout();
        card1.show(imagePanel1, "biometric");

//    applicationMenu.setBackground(new Color(51,153,255));

        /*ContainerJFrame.applicationMenu.setBackground(new Color(204, 204, 204));
         ContainerJFrame.applicationMenu.setBorder(javax.swing.BorderFactory.createLineBorder(Color.DARK_GRAY, 1, false));
         ContainerJFrame.applicationMenu.setBorderPainted(true);
         ContainerJFrame.applicationMenu.setOpaque(true);
         ContainerJFrame.applicationMenu.setSelected(true);
         ContainerJFrame.registrationMenu.setBackground(new Color(240, 240, 240));
         ContainerJFrame.registrationMenu.setOpaque(false);
         ContainerJFrame.registrationMenu.setSelected(false);
         ContainerJFrame.registrationMenu.setBorderPainted(false);
         ContainerJFrame.dashboardMenu.setBackground(new Color(240, 240, 240));
         ContainerJFrame.dashboardMenu.setOpaque(false);
         ContainerJFrame.dashboardMenu.setSelected(false);
         ContainerJFrame.dashboardMenu.setBorderPainted(false);
         ContainerJFrame.nidRegisterMenu.setBackground(new Color(240, 240, 240));
         ContainerJFrame.nidRegisterMenu.setOpaque(false);
         ContainerJFrame.nidRegisterMenu.setSelected(false);
         ContainerJFrame.nidRegisterMenu.setBorderPainted(false);*/

        applicationData = new ApplicationData();

        if (data != null) {

            initializeFontForFields();

            if (smart_card_photo != null) {
                applicationData.setPhoto(smart_card_photo);
                smart_card_photo = null;
            }

            //modifications to the form design is required
            String voter_at = "";
            String voter_address = "";
            String other_address = "";

            for (String key : data.keySet()) {

                if (key.equalsIgnoreCase(Defs.SC_NAME_ENG)) {
                    //inp_name_english.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_NAME_BNG)) {
                    //inp_name_bangla.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_NAME_FATHER)) {
                   // inp_name_father.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_NAME_MOTHER)) {
                    //inp_name_mother.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_DOB)) {
                    Date dob = formatSmartCardDateStr(data.get(key));
                    if (dob != null) {
                        ApplicationNidPanel.cal_date_of_birth.setDate(dob);
                    }
                } else if (key.equalsIgnoreCase(Defs.SC_VOTER_ADDRESS)) {
                    voter_address = data.get(key);
                } else if (key.equalsIgnoreCase(Defs.SC_ISSUE_DATE)) {
                    Date issue_date = formatSmartCardDateStr(data.get(key));
                    if (issue_date != null) {
                        ApplicationNidPanel.cal_nid_issue_date.setDate(issue_date);
                    }
                } else if (key.equalsIgnoreCase(Defs.SC_NID_OLD)) {
                    ApplicationNidPanel.inp_nid_old.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_NID_NEW)) {
                    ApplicationNidPanel.inp_nid.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_NATIONALITY)) {
                    ApplicationNidPanel.inp_nationality.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_BIRTH_PLACE)) {
                    setBirthPlaceDistrict(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_BLOOD_GRP)) {
                    setBloodGroup(data.get(key));

                } else if (key.equalsIgnoreCase(Defs.SC_GENDER)) {
                    String gender = data.get(key);
                    if (gender != null && gender.length() > 0) {
                        if (gender.equalsIgnoreCase("male") || gender.equalsIgnoreCase("m")) {
                            //rdo_gender_male.setSelected(true);
                        } else if (gender.equalsIgnoreCase("female") || gender.equalsIgnoreCase("f")) {
                            //rdo_gender_female.setSelected(true);
                        } else {
                            //rdo_gender_third.setSelected(true);
                        }
                    }

                } else if (key.equalsIgnoreCase(Defs.SC_VOTER_AT)) {
                    voter_at = data.get(key);

                    if (voter_at != null && voter_at.length() > 0) {

                        for (int i = 0; i < ApplicationNidPanel.cmb_voter_at.getItemCount(); i++) {
                            String val = (String) ApplicationNidPanel.cmb_voter_at.getItemAt(i).toString();
                            if (voter_at.equalsIgnoreCase("PR") && val.equalsIgnoreCase("PRESENT")) {
                                ApplicationNidPanel.cmb_voter_at.setSelectedIndex(i);
                                break;
                            }
                        }
                    }

                } else if (key.equalsIgnoreCase(Defs.SC_OTHER_ADDRESS)) {
                    other_address = data.get(key);
                } else if (key.equalsIgnoreCase(Defs.SC_UIM)) {
                    ApplicationNidPanel.inp_uim.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_EDUCATION)) {
                    //processing required
                } else if (key.equalsIgnoreCase(Defs.SC_PROFESSION)) {
                    //processing required
                } else if (key.equalsIgnoreCase(Defs.SC_RELIGION)) {
                    //processing required
                } else if (key.equalsIgnoreCase(Defs.SC_DISABILITY)) {
                    //processing required
                } else if (key.equalsIgnoreCase(Defs.SC_FATHER_NID)) {
                   // inp_father_nid.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_MOTHER_NID)) {
                   // inp_mother_nid.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_SPOUSE_NID)) {
                   // inp_spouse_nid.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_NAME_SPOUSE)) {
                   // inp_name_spouse.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_PASSPORT)) {
                    ApplicationNidPanel.inp_drv_license.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_TIN)) {
                    ApplicationNidPanel.inp_tin_no.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_DRIVING_LICENSE)) {
                    ApplicationNidPanel.inp_passport.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_TELEPHONE)) {
                    ApplicationNidPanel.inp_telephone.setText(data.get(key));
                } else if (key.equalsIgnoreCase(Defs.SC_MOBILE)) {
                    ApplicationNidPanel.inp_mobile.setText(data.get(key));
                }

            }

            processSmartCardAddress(voter_address, voter_at);
            processSmartCardAddress(other_address, "other");

        } else {

            JOptionPane.showMessageDialog(null, "No data found for loading", "Card Read Error", JOptionPane.ERROR_MESSAGE);

        }


    }

//***************************** Smart Card Utils **************************************************
    private void initializeFontForFields() {
        try {

            String font_path = "/com/perp/fonts/Bangla_arial.ttf";

            banglaFont = Font.createFont(Font.TRUETYPE_FONT, new File(ApplicationNidPanel.class.getResource(font_path).toURI())).deriveFont(15f);

            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            ge.registerFont(Font.createFont(Font.TRUETYPE_FONT, new File(ApplicationNidPanel.class.getResource(font_path).toURI())));

            //inp_name_bangla.setFont(new java.awt.Font("Kalpurush", 0, 11));;
            //inp_name_father.setFont(new java.awt.Font("Kalpurush", 0, 11));;
            //inp_name_mother.setFont(new java.awt.Font("Kalpurush", 0, 11));;
            //inp_name_spouse.setFont(new java.awt.Font("Kalpurush", 0, 11));;
            //inp_present_mouza_otr.setFont(new java.awt.Font("Kalpurush", 0, 11));;
            //inp_permanent_mouza_otr.setFont(new java.awt.Font("Kalpurush", 0, 11));
            //cmb_voter_area.setFont(new java.awt.Font("Kalpurush", 0, 11));

        } catch (Exception ex) {
        }

    }

    private static Date formatSmartCardDateStr(String dateValue) {

        try {

            if (dateValue != null && dateValue.length() == 8) {

                String day = dateValue.substring(0, 2);
                String month = dateValue.substring(2, 4);
                String year = dateValue.substring(4, 8);

                String formatted_date = day + "/" + month + "/" + year;

                Date date = new SimpleDateFormat("dd/MM/yyyy").parse(formatted_date);
                return date;
            }

        } catch (Exception ex) {
            ex.printStackTrace();
        }

        return null;

    }

    private static void processSmartCardAddress(String address, String voter_at) {

        if (address != null && address.length() > 0) {

            String add_arr[] = address.split(",");

            String upozila = "";
            String district = "";
            String other = "";

            for (int i = 0; i < add_arr.length; i++) {

                if (i < 3 || i == 4) {
                    if (other.length() > 0) {
                        other += ", ";
                    }
                    other += add_arr[i];
                }

                upozila = add_arr[3];
                district = add_arr[add_arr.length - 1];
            }

            //find district 
            if (district != null && district.length() > 0) {

                try {

                    DistrictJpaController dc = new DistrictJpaController();

                    database.entity.District districtEO = (database.entity.District) dc.getEntityManager()
                            .createNamedQuery("District.findByName")
                            .setParameter("name", district.trim())
                            .getSingleResult();

                    if (districtEO.getDivision() != null) {

                        AddressEntityManagerBean aem = new AddressEntityManagerBean();
                        List<Upozila> upozilas_list = aem.getUpozilaFindByDistrictId(Integer.parseInt(districtEO.getId()));

                        String selected_upozila_id = "";
                        if (upozila != null && upozila.length() > 0 && upozilas_list.size() > 0) {

                            for (Upozila upz : upozilas_list) {

                                if (upz.getName().trim().equalsIgnoreCase(upozila.trim())) {
                                    selected_upozila_id = upz.getId();
                                    break;

                                }
                            }
                        }

                        if (voter_at != null && "PR".equalsIgnoreCase(voter_at.trim())) {

                            applicationData.setPresentDistrict(districtEO.getId().toString());
                            applicationData.setPresentUpozila(selected_upozila_id);
                            //setSelectedValueDivision(cmb_present_division, districtEO.getDivision().toString());
                            //inp_present_mouza_otr.setText(other);

                        } else {

                            applicationData.setPermDistrict(districtEO.getId().toString());
                            applicationData.setPermUpozila(selected_upozila_id);
                            //setSelectedValueDivision(cmb_permanent_division, districtEO.getDivision().toString());
                            //inp_permanent_mouza_otr.setText(other);

                        }

                    }
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        }

    }

    private static void setBirthPlaceDistrict(String district) {

        try {

            if (district != null && district.length() > 0) {

                DistrictJpaController dc = new DistrictJpaController();

                database.entity.District districtEO = (database.entity.District) dc.getEntityManager()
                        .createNamedQuery("District.findByNameEn")
                        .setParameter("nameEn", district.trim())
                        .getSingleResult();

                if (districtEO.getId() != null) {

                    String desc = "";
                    for (District ds : Lookup.DISTRICT_LIST) {
                        if (ds.getId().equalsIgnoreCase(districtEO.getId())) {
                            desc = ds.getNameEn();
                            break;
                        }
                    }

                    if (desc == "") {
                        return;
                    }

/*                    for (int i = 0; i < cmb_birth_place_district.getItemCount(); i++) {
                        String val = (String) cmb_birth_place_district.getItemAt(i).toString();
                        if (val.equalsIgnoreCase(desc)) {
                            cmb_birth_place_district.setSelectedIndex(i);
                            break;
                        }
                    } */

                }

            }

        } catch (Exception e) {
        }

    }

    private static void setBloodGroup(String bldGrp) {

        try {

            if (bldGrp != null && bldGrp.length() > 0) {

               /* for (int i = 0; i < cmb_blood_grp.getItemCount(); i++) {
                    String val = (String) cmb_blood_grp.getItemAt(i).toString();
                    if (val.equalsIgnoreCase(bldGrp)) {
                        cmb_blood_grp.setSelectedIndex(i);
                        break;
                    }
                }*/

            }

        } catch (Exception e) {
        }

    }
//***************************** Smart Card Utils **************************************************

    private void callGreenBitFingerPrint() {
        com.rizwan.greenbit.FingerPrintForm fpView = new com.rizwan.greenbit.FingerPrintForm();
        fpView.setTitle("Green Bit");
        fpView.setLocationRelativeTo(null);
        fpView.setVisible(true);
    }

    @Override
    public void prepareApplicationData() throws Exception {
        
        //applicationData.setDateOfBirth(dob);
        //applicationData.setPinNo(nid);

        //PERSONAL DETAILS

       /* applicationData.setNameBn(inp_name_bangla.getText());
        applicationData.setNameEn(inp_name_english.getText());

        String gen;
        if (rdo_gender_third.isSelected()) {
            gen = Lookup.THIRD_GENDER;
        } else if (rdo_gender_female.isSelected()) {
            gen = Lookup.FEMALE;
        } else if (rdo_gender_male.isSelected()) {
            gen = Lookup.MALE;
        } else {
            gen = "";
        }
        applicationData.setGender(gen);

        applicationData.setFatherName(inp_name_father.getText());
        applicationData.setFatherNid(inp_father_nid.getText());

        applicationData.setMotherName(inp_name_mother.getText());
        applicationData.setMotherNid(inp_mother_nid.getText());

        applicationData.setSpouseName(inp_name_spouse.getText());
        applicationData.setSpouseNid(inp_spouse_nid.getText());
        applicationData.setMaritalStatus(((Item) cmb_marital_status.getSelectedItem()).getValue().toString());*/

        //CITIZENSHIP DETAILS

       /* applicationData.setNidNumber(inp_nid.getText());
        String nidIssueDate = cal_nid_issue_date.getDate() != null ? Defs.SDF.format(cal_nid_issue_date.getDate()) : "";
        applicationData.setNidIssueDate(nidIssueDate);
        applicationData.setPinNo(inp_nid_old.getText());

        applicationData.setBirthDistrict(((Item) cmb_birth_place_district.getSelectedItem()).getValue().toString());
        String dob = cal_nid_issue_date.getDate() != null ? Defs.SDF.format(cal_date_of_birth.getDate()) : "";
        applicationData.setDateOfBirth(dob);
        applicationData.setNationality(inp_nationality.getText());

        applicationData.setBirthRegistrationNumber(inp_birth_registration_no.getText());
        applicationData.setBloodGroup(((Item) cmb_blood_grp.getSelectedItem()).getValue().toString());

        applicationData.setUniqueIdentificationMark(inp_uim.getText());*/

        //ADDRESS

        // -- PRESENT ADDRESS

       /* applicationData.setPresentDivision(((Item) cmb_present_division.getSelectedItem()).getValue().toString());
        applicationData.setPresentDistrict(((Item) cmb_present_district.getSelectedItem()).getValue().toString());
        applicationData.setPresentUpozila(((Item) cmb_present_upozila.getSelectedItem()).getValue().toString());
        applicationData.setPresentRmo(((Item) cmb_present_rmo.getSelectedItem()).getValue().toString());

        applicationData.setPresentCity(((Item) cmb_present_city.getSelectedItem()).getValue().toString());
        applicationData.setPresentEunion(((Item) cmb_present_eunion.getSelectedItem()).getValue().toString());
        applicationData.setPresentPostOffice(((Item) cmb_present_postoffice.getSelectedItem()).getValue().toString());
        applicationData.setPresentPostCode(inp_present_postcode.getText());

        applicationData.setPresentMouza(((Item) cmb_present_mouza.getSelectedItem()).getValue().toString());
        applicationData.setPresentMouzaOtr(inp_present_mouza_otr.getText());
        applicationData.setPresentVillage(((Item) cmb_present_village.getSelectedItem()).getValue().toString());
        applicationData.setPresentVillageOtr(inp_present_village_otr.getText());

        applicationData.setPresentHouseNo(inp_present_house.getText()); */

        // -- PERMANENT ADDRESS

      /*  applicationData.setPermDivision(((Item) cmb_permanent_division.getSelectedItem()).getValue().toString());
        applicationData.setPermDistrict(((Item) cmb_permanent_district.getSelectedItem()).getValue().toString());
        applicationData.setPermUpozila(((Item) cmb_permanent_upozila.getSelectedItem()).getValue().toString());
        applicationData.setPermanentRmo(((Item) cmb_permanent_rmo.getSelectedItem()).getValue().toString());

        applicationData.setPermanentCity(((Item) cmb_permanent_city.getSelectedItem()).getValue().toString());
        applicationData.setPermanentEunion(((Item) cmb_permanent_eunion.getSelectedItem()).getValue().toString());
        applicationData.setPermanentPostOffice(((Item) cmb_permanent_postoffice.getSelectedItem()).getValue().toString());
        applicationData.setPermanentPostCode(inp_permanent_postcode.getText());

        applicationData.setPermanentMouza(((Item) cmb_permanent_mouza.getSelectedItem()).getValue().toString());
        applicationData.setPermanentMouzaOtr(inp_permanent_mouza_otr.getText());
        applicationData.setPermanentVillage(((Item) cmb_permanent_village.getSelectedItem()).getValue().toString());
        applicationData.setPermanentVillageOtr(inp_permanent_village_otr.getText());

        applicationData.setPermanentHouseNo(inp_permanent_house.getText()); */

        // -- VOTER AREA

       /* applicationData.setVoterAt(((Item) cmb_voter_at.getSelectedItem()).getValue().toString());
        applicationData.setVoterArea((Item) cmb_voter_area.getSelectedItem() != null ? ((Item) cmb_voter_area.getSelectedItem()).getValue().toString() : "");

        //MISCELLANEOUS        

        String eduLevel = ((Item) cmb_education.getSelectedItem()).getValue().toString();
        applicationData.setEducationLevel(eduLevel);
        String profession = ((Item) cmb_profession.getSelectedItem()).getValue().toString();
        applicationData.setProfession(profession);
        String religion = ((Item) cmb_religion.getSelectedItem()).getValue().toString();
        applicationData.setReligion(religion);

        applicationData.setPhone(inp_telephone.getText());
        applicationData.setMobile(inp_mobile.getText());
        applicationData.setEmail(inp_email.getText());

        applicationData.setPassport(inp_passport.getText());
        applicationData.setTin(inp_tin_no.getText());
        applicationData.setDlNumber(inp_drv_license.getText()); */

        // ----------------- checkbox processing start ------------------------------

        //handicap
        //** any changes made to the handicap list string ("handiCapListStr") must also be implemented on the search
      /*  String handiCapListStr = "";
        List<String> handiList = new ArrayList<String>();

        if (chk_handicap_amputant.isSelected()) {
            handiList.add("amputent");
        }
        if (chk_handicap_deaf.isSelected()) {
            handiList.add("deaf");
        }
        if (chk_handicap_mute.isSelected()) {
            handiList.add("mute");
        }
        if (chk_handicap_others.isSelected()) {
            handiList.add("others");
        }
        if (chk_handicap_speech.isSelected()) {
            handiList.add("speech");
        }
        if (chk_handicap_visual.isSelected()) {
            handiList.add("visual");
        }

        if (handiList.size() > 0) {
            handiCapListStr = handiList.get(0);
        }
        for (int i = 1; i < handiList.size(); i++) {
            handiCapListStr += "," + handiList.get(i);
        }
        applicationData.setHandicapInfo(handiCapListStr);
        applicationData.setHandicapRemarks(txt_handicap_remarks.getText()); */
        
        applicationData.setApplicantType("ONLINE");

        //less than ten finger
        if (chk_fp_not_ten_fingers.isSelected()) {
            applicationData.setFingerRemarks(inp_remark_fp.getText());
        } else {
            applicationData.setFingerRemarks("");
        }

        // ----------------- checkbox processing finish ------------------------------

    }

    @Override
    public boolean isDataValid() throws Exception {

        boolean isValidData = false;
//        errorFields = new ArrayList<String>();
        errorFieldsMap = new HashMap<String, Boolean>();

        if (applicationData == null) {
            return isValidData;
        }

        Enrollment enrollment = new Enrollment();
        errorFieldsMap = enrollment.validateApplicationData(applicationData);

        if (errorFieldsMap == null) {
            isValidData = false;
        } else {

            int err_count = 0;

         /*   for (Map.Entry<String, Boolean> current_field : errorFieldsMap.entrySet()) {
//                System.out.println("Key : " + current_field.getKey() + " , Value : " + current_field.getValue());

                if (current_field.getKey().equalsIgnoreCase(Defs.NAME_BNG)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_name_bangla);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_name_bangla, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.NAME_ENG)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_name_english);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_name_english, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.GENDER)) {
                    if (current_field.getValue()) {
                        rdo_gender_male.setBorderPainted(true);
                        rdo_gender_male.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(errorFieldBorderColor, 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1)));
                        rdo_gender_female.setBorderPainted(true);
                        rdo_gender_female.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(errorFieldBorderColor, 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1)));
                        rdo_gender_third.setBorderPainted(true);
                        rdo_gender_third.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(errorFieldBorderColor, 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1)));
                        err_count++;
                    } else {
                        rdo_gender_male.setBorderPainted(false);
                        rdo_gender_male.setBorder(null);
                        rdo_gender_female.setBorderPainted(false);
                        rdo_gender_female.setBorder(null);
                        rdo_gender_third.setBorderPainted(false);
                        rdo_gender_third.setBorder(null);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.FATHER_NAME)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_name_father);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_name_father, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.MOTHER_NAME)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_name_mother);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_name_mother, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.SPOUSE_NAME)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_name_spouse);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_name_spouse, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.FATHER_NID)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_father_nid);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_father_nid, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.MOTHER_NID)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_mother_nid);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_mother_nid, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.SPOUSE_NID)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_spouse_nid);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_spouse_nid, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.MARITAL_STATUS)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_marital_status);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_marital_status, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.NATIONAL_ID)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_nid);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_nid, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PIN_NO)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_nid_old);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_nid_old, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.NID_ISSUE_DATE)) {
                    if (current_field.getValue()) {
                        setErrorCalField(cal_nid_issue_date);
                        err_count++;
                    } else {
                        setDefaultCalField(cal_nid_issue_date, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.DATE_OF_BIRTH)) {
                    if (current_field.getValue()) {
                        setErrorCalField(cal_date_of_birth);
                        err_count++;
                    } else {
                        setDefaultCalField(cal_date_of_birth, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.BIRTH_DISTRICT)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_birth_place_district);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_birth_place_district, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.BIRTH_REGISTRATION_NO)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_birth_registration_no);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_birth_registration_no, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.NATIONALITY)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_nationality);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_nationality, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.BLOOD_GROUP)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_blood_grp);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_blood_grp, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_DIVISION)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_present_division);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_present_division, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_DISTRICT)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_present_district);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_present_district, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_UPOZILA)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_present_upozila);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_present_upozila, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_RMO)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_present_rmo);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_present_rmo, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_CITY_CORPORATION)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_present_city);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_present_city, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_EUNION)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_present_eunion);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_present_eunion, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_MOUZA)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_present_mouza);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_present_mouza, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_MOUZA_OTHER)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_present_mouza_otr);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_present_mouza_otr, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_VILLAGE)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_present_village);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_present_village, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_VILLAGE_OTHER)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_present_village_otr);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_present_village_otr, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_HOUSE)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_present_house);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_present_house, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_POSTOFFICE)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_present_postoffice);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_present_postoffice, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PRESENT_ADDRESS_POSTCODE)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_present_postcode);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_present_postcode, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_DIVISION)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_permanent_division);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_permanent_division, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_DISTRICT)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_permanent_district);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_permanent_district, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_UPOZILA)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_permanent_upozila);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_permanent_upozila, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_RMO)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_permanent_rmo);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_permanent_rmo, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_CITY_CORPORATION)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_permanent_city);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_permanent_city, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_EUNION)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_permanent_eunion);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_permanent_eunion, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_MOUZA)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_permanent_mouza);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_permanent_mouza, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_MOUZA_OTHER)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_permanent_mouza_otr);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_permanent_mouza_otr, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_VILLAGE)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_permanent_village);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_permanent_village, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_VILLAGE_OTHER)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_permanent_village_otr);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_permanent_village_otr, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_HOUSE)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_permanent_house);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_permanent_house, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_POSTOFFICE)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_permanent_postoffice);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_permanent_postoffice, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PERMANENT_ADDRESS_POSTCODE)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_permanent_postcode);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_permanent_postcode, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.VOTER_AT)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_voter_at);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_voter_at, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.VOTER_AREA)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_voter_area);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_voter_area, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.EDUCATION)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_education);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_education, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.PROFESSION)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_profession);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_profession, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.RELIGION)) {
                    if (current_field.getValue()) {
                        setErrorComboBox(cmb_religion);
                        err_count++;
                    } else {
                        setDefaultComboBox(cmb_religion, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.TELEPHONE)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_telephone);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_telephone, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.MOBILE)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_mobile);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_mobile, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.EMAIL)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_email);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_email, false);
                    }
                } else if (current_field.getKey().equalsIgnoreCase(Defs.TIN_NO)) {
                    if (current_field.getValue()) {
                        setErrorTextField(inp_tin_no);
                        err_count++;
                    } else {
                        setDefaultTextField(inp_tin_no, false);
                    }
                }
            } */
//            System.out.println("Error Count : " + err_count);

            if (err_count == 0) {
                isValidData = true;
            }
        }

        return isValidData;
    }

    @Override
    public void dataReady() throws Exception {
        PersonManagerBean pmb=new PersonManagerBean();
        AddBioPersonResponse resp = new AddBioPersonResponse();

        BioPerson bioPersonBO = new BioPerson();
        BioBiometric bioBiometric = new BioBiometric();

        // ----------------- Set all BioPerson data from client bean Applicationdata -----------------
        
        // PERSON ID
        bioPersonBO.setId(applicationData.getId());
        
        // PERSONAL DETAILS
        bioPersonBO.setNameBn(applicationData.getNameBn());
        bioPersonBO.setNameEn(applicationData.getNameEn());

        bioPersonBO.setGender(applicationData.getGender());

        bioPersonBO.setFatherName(applicationData.getFatherName());
        bioPersonBO.setFatherNid(applicationData.getFatherNid());

        bioPersonBO.setMotherName(applicationData.getMotherName());
        bioPersonBO.setMotherNid(applicationData.getMotherNid());

        bioPersonBO.setSpouseName(applicationData.getSpouseName());
        bioPersonBO.setSpouseNid(applicationData.getSpouseNid());
        bioPersonBO.setMaritalStatus(applicationData.getMaritalStatus());

        // CITYZENSHIP DETAILS
        bioPersonBO.setNidNumber(applicationData.getNidNumber());
        bioPersonBO.setNidIssueDate(applicationData.getNidIssueDate());
        bioPersonBO.setPinNo(applicationData.getPinNo());

        bioPersonBO.setBirthDistrict(applicationData.getBirthDistrict());
        bioPersonBO.setDateOfBirth(applicationData.getDateOfBirth());
        System.out.println("KI hoise vai -> " +applicationData.getDateOfBirth());
        bioPersonBO.setNationality(applicationData.getNationality());

        bioPersonBO.setBirthRegistrationNumber(applicationData.getBirthRegistrationNumber());
        bioPersonBO.setBloodGroup(applicationData.getBloodGroup());

        bioPersonBO.setUniqueIdentificationMark(applicationData.getUniqueIdentificationMark());

        // PRESENT ADDRESS
        bioPersonBO.setPresentDivision(applicationData.getPresentDivision());
        bioPersonBO.setPresentDistrict(applicationData.getPresentDistrict());
        bioPersonBO.setPresentUpozila(applicationData.getPresentUpozila());
        bioPersonBO.setPresentRmo(applicationData.getPresentRmo());

        bioPersonBO.setPresentCity(applicationData.getPresentCity());
        bioPersonBO.setPresentEunion(applicationData.getPresentEunion());
        bioPersonBO.setPresentPostOffice(applicationData.getPresentPostOffice());
        bioPersonBO.setPresentPostCode(applicationData.getPresentPostCode());

        bioPersonBO.setPresentMouza(applicationData.getPresentMouza());
        bioPersonBO.setPresentMouzaOtr(applicationData.getPresentMouzaOtr());
        bioPersonBO.setPresentVillage(applicationData.getPresentVillage());
        bioPersonBO.setPresentVillageOtr(applicationData.getPresentVillageOtr());

        bioPersonBO.setPresentHouseNo(applicationData.getPresentHouseNo());

        // PERMANENT ADDRESS
        bioPersonBO.setPermDivision(applicationData.getPermDivision());
        bioPersonBO.setPermDistrict(applicationData.getPermDistrict());
        bioPersonBO.setPermUpozila(applicationData.getPermUpozila());
        bioPersonBO.setPermanentRmo(applicationData.getPermanentRmo());

        bioPersonBO.setPermanentCity(applicationData.getPermanentCity());
        bioPersonBO.setPermanentEunion(applicationData.getPermanentEunion());
        bioPersonBO.setPermanentPostOffice(applicationData.getPermanentPostOffice());
        bioPersonBO.setPermanentPostCode(applicationData.getPermanentPostCode());

        bioPersonBO.setPermanentMouza(applicationData.getPermanentMouza());
        bioPersonBO.setPermanentMouzaOtr(applicationData.getPermanentMouzaOtr());
        bioPersonBO.setPermanentVillage(applicationData.getPermanentVillage());
        bioPersonBO.setPermanentVillageOtr(applicationData.getPermanentVillageOtr());

        bioPersonBO.setPermanentHouseNo(applicationData.getPermanentHouseNo());

        // VOTER AREA
        bioPersonBO.setVoterAt(applicationData.getVoterAt());
        bioPersonBO.setVoterArea(applicationData.getVoterArea());

        //MISCELLANEOUS
        bioPersonBO.setEducationLevel(applicationData.getEducationLevel());
        bioPersonBO.setProfession(applicationData.getProfession());
        bioPersonBO.setReligion(applicationData.getReligion());

        bioPersonBO.setPhone(applicationData.getPhone());
        bioPersonBO.setMobile(applicationData.getMobile());
        bioPersonBO.setEmail(applicationData.getEmail());

        bioPersonBO.setPassport(applicationData.getPassport());
        bioPersonBO.setTin(applicationData.getTin());
        bioPersonBO.setDlNumber(applicationData.getDlNumber());

        // ----------------- checkbox processing start ------------------------------

        //HANDICAP
        bioPersonBO.setHandicapInfo(applicationData.getHandicapInfo());
        bioPersonBO.setHandicapRemarks(applicationData.getHandicapRemarks());

        // ----------------- Set all BioMetric data from client bean Applicationdata -----------------
        
        // BIOMATRIC ID
        bioBiometric.setId(applicationData.getBiometricId());
        System.out.println("bio metric: "+applicationData.getBiometricId());
        
        // PHOTO
        bioBiometric.setPhoto(applicationData.getPhoto());
        
        // SIGNATURE
        bioBiometric.setSignature(applicationData.getSignature());
        
        // RIGHT HAND FINGER PRINT
        bioBiometric.setWsqRt(applicationData.getWsqRt());
        bioBiometric.setWsqRi(applicationData.getWsqRi());
        bioBiometric.setWsqRm(applicationData.getWsqRm());
        bioBiometric.setWsqRr(applicationData.getWsqRr());
        bioBiometric.setWsqRl(applicationData.getWsqRl());
        
        // LEFT HAND FINGER PRINT
        bioBiometric.setWsqLt(applicationData.getWsqLt());
        bioBiometric.setWsqLi(applicationData.getWsqLi());
        bioBiometric.setWsqLm(applicationData.getWsqLm());
        bioBiometric.setWsqLr(applicationData.getWsqLr());
        bioBiometric.setWsqLl(applicationData.getWsqLl());
        
        // FINGER REMARKS
        bioBiometric.setFingerRemarks(applicationData.getFingerRemarks());
        
        // LEFT EYE
        bioBiometric.setEyeLeft(applicationData.getLeft_eye());
        
        // RIGHT EYE
        bioBiometric.setEyeRight(applicationData.getRight_eye());
        
        bioPersonBO.setApplicantType(applicationData.getApplicantType());

        bioPersonBO.setBiometric(bioBiometric);
        resp = pmb.insertUpdatePerson(bioPersonBO);
        
        System.err.println("GetBioMetric -> " +bioPersonBO.getBiometric());
        if (resp.isOperationStatus() && !resp.isDataUpdateStatus() ) {
            applicationData.setId(resp.getBioPerson().getId());
            pmb.deleteAndInsertAttachment(applicationData);
            applicationData = new ApplicationData();

            resetEnrollmentApplication();
            Utils.showSuccessMsg("Data Saved Successfully");
        } 
        else if ( resp.isDataUpdateStatus() ) {
            Utils.showSuccessMsg("Data Update Sucessfully");
        }
        else {
            Utils.showErrorMsg("Failed To SAve");
        }
        //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public void dataError() throws Exception {

        showErrorDialog();

    }

    private void setErrorTextField(JTextField field) {
        field.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(errorFieldBorderColor, 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 5, 1, 1)));
    }

    private void setErrorCalField(com.toedter.calendar.JDateChooser field) {
        field.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(errorFieldBorderColor, 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 5, 1, 1)));
    }

    private void setErrorComboBox(JComboBox comboBox) {
        comboBox.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(errorFieldBorderColor, 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1)));
    }

    private void setDefaultTextField(JTextField field, boolean isReset) {
        if (isReset) {
            field.setText("");
        }
        field.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(defaultFieldBorderColor, 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 5, 1, 1)));
    }

    private void setDefaultCalField(com.toedter.calendar.JDateChooser field, boolean isReset) {
        if (isReset) {
            field.setCalendar(null);
        }
        field.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(defaultFieldBorderColor, 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 5, 1, 1)));
    }

    private void setDefaultComboBox(JComboBox comboBox, boolean isReset) {

        if (isReset) {
            if (comboBox.getItemCount() != 0) {
                comboBox.setSelectedIndex(0);
            }
        }
        comboBox.setBorder(javax.swing.BorderFactory.createCompoundBorder(new javax.swing.border.LineBorder(defaultFieldBorderColor, 1, true), javax.swing.BorderFactory.createEmptyBorder(1, 5, 1, 1)));
    }

    private void showErrorDialog() {
        JOptionPane.showMessageDialog(this, "Application form contains error", "VALIDATION ERROR", JOptionPane.ERROR_MESSAGE);
    }
}
